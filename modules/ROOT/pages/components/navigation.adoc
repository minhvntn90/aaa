= Navigation
:page-aliases: 3.0.0@btk:ROOT:{page-relative-src-path}

The menu responsive navigation header, the navbar. Includes support for branding, navigation, and more, including support for our collapse plugin.

== Features
* Navbars and their contents are fluid by default. Change the container to limit their horizontal width in different ways.
* Navbars come with built-in support for a handful of sub-components. 
* Navbar navigation links build on our .nav options with their own modifier class and require the use of toggler classes for proper responsive styling. Navigation in navbars will also grow to occupy as much horizontal space as possible to keep your navbar contents securely aligned.
* Navbar themes are easier than ever thanks to Bootstrapâ€™s combination of Sass and CSS variables. 
* Class and CSS can be overridden in the Dialog

== Usage
The component is hard-coded into the nav area template "btk/templates/areas/nav.ftl".

=== Add Navigation
To add the Navigation:

. In an Page Home templage propeties area click *Edit properties*. Select *Navigation* then *Next*.
image:components/navigation/2.config-navigation.png[edit component dialog]

. There are 2 navigation render method : Content app & Page structure, they are control by checkbox Auto generated fields

. In content app add new folder , that contain to manage a group of menu
image:components/navigation/1.add_menu.png[Add component dialog]

. In the dialog you can enter Image (logo), Style, and select a group navigation that created
. add the Class, Slyte and also Column Class, Style

. In preview mode, you can see how the navigation are displayed on the page.
image:components/navigation/3.preview.png[Using WYSIWYG preview]

== Code
[tabs]
====
Template FTL::
+
--
*Navigaiton*
[source,ftl]
----
[#include "/btk/includes/templates/nav.ftl"]
[#assign navRootPage = navfn.rootPage(content)]
[#assign rootPage = cmsfn.root(content, "mgnl:page")! ]
[#assign currentPage = cmsfn.page(content)!]
[#assign mainNavUUID = rootPage.navItems!]
[#assign mainNav = cmsfn.contentById(mainNavUUID, "nav")!]
[#assign searchPage = '']
[#assign isHideNav = currentPage.hideNavigation!false/]
[#if isHideNav == false]
  [#if rootPage?has_content && rootPage.navStyle?has_content && rootPage.navStyle == "dark"]
    <nav class="navbar navbar-expand-md fixed-top bg-dark border-bottom border-body" data-bs-theme="dark">
  [#elseif rootPage?has_content && rootPage.navStyle?has_content && rootPage.navStyle == "blue"]
    <nav class="navbar navbar-expand-md fixed-top bg-primary" data-bs-theme="dark">
  [#elseif rootPage?has_content && rootPage.navStyle?has_content && rootPage.navStyle == "light"]
    <nav class="navbar navbar-expand-md fixed-top bg-success-bg-subtle">
  [#else]
    <nav class="navbar navbar-expand-md fixed-top bg-success-bg">
  [/#if]
    <div class="container">
      <a class="navbar-brand" href="${navfn.link(rootPage)}">
        [#if rootPage.logo?has_content]
          [#assign src = damfn.getAssetLink(rootPage.logo)]
          [#if src?has_content]
            <img src="${src}" alt="${rootPage.pageTitle!rootPage.@name}">
          [/#if]
        [/#if]
      </a>
      <button
        class="navbar-toggler"
        type="button"
        data-bs-toggle="collapse"
        data-bs-target="#navigation"
        aria-controls="navigation"
        aria-expanded="false"
      >
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navigation">
        <ul class="navbar-nav">
          [#if rootPage.isAutoGenerated?has_content && rootPage.isAutoGenerated == 'auto']
            [#assign navItems = navfn.navItems(rootPage)]
            [#if navItems?size > 0]
              [#list navItems as navItem]
                [#if cmsfn.metaData(navItem, 'mgnl:template') == 'btk:pages/search']
                  [#assign searchPage = navItem]
                  [#break]
                [/#if]

                [#assign navItemsName = navItem.navTitle!navItem.@name]
                [#assign navItemsNested = navfn.navItems(navItem)]
                [#assign isActive = false]

                [#if navItem == cmsfn.page(content)]
                    [#assign isActive = true]
                [/#if]

                [#assign isHideInNav = navItem.hideInNav!false/]
                [#if isHideInNav == false]
                  [#if navItemsNested?size > 0]
                    <li class="nav-item">
                      <div class="btn-group">
                        <a class="nav-link ${isActive?then('active unclickable', '')}" [#if isActive == true]aria-current="page"[/#if] href="${navfn.link(navItem)}">${navItemsName}</a>
                        <button type="button" class="btn dropdown-toggle dropdown-toggle-split" data-bs-toggle="dropdown" aria-expanded="false">
                          <span class="visually-hidden">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu">
                        [#list navItemsNested as navItemNested]
                          [#assign isHideInNav2 = navItemNested.hideInNav!false/]
                          [#if isHideInNav2 == false]
                            <a class="dropdown-item" href="${navfn.link(navItemNested)}">${navItemNested.navTitle!navItemNested.@name}</a>
                          [/#if]
                        [/#list]
                        </div>
                      </div>
                    </li>
                  [#else]
                    <li class="nav-item">
                      <a class="nav-link ${isActive?then('active unclickable', '')}" [#if isActive == true]aria-current="page"[/#if] href="${navfn.link(navItem)}">${navItemsName}</a>
                    </li>
                  [/#if]
                [/#if]
              [/#list]
            [/#if]
          [#else]
            [#if mainNav?has_content]
              [#assign navAppItems = cmsfn.children(mainNav, "mgnl:nav")]
              [#list navAppItems as navItem]

                [#assign navItemsName = navItem.navTitle!navItem.@name]
                [#assign navItemsNested = cmsfn.children(navItem, "mgnl:nav")]
                [#assign isActive = false]
                [#assign linkLevel1 = ""]
                [#if navItem.link?has_content && navItem.link == "internal"]
                  [#assign linkLevel1 = getPageLinkById(navItem.internal!"")]

                  [#assign navPageContent = cmsfn.contentById(navItem.internal, 'website')!""]
                  [#if navItem.internal == currentPage['jcr:uuid']]
                    [#assign isActive = true]
                  [#else]
                    [#assign isActive = false]
                  [/#if]
                [#else]
                  [#assign linkLevel1 = navItem.external]
                [/#if]
                [#assign isHideInNav1 = navPageContent.hideInNav!false/]
                [#if isHideInNav1 == false]
                  [#if navItemsNested?size > 0]
                    <li class="nav-item">
                      <div class="btn-group">
                        <a class="nav-link [#if isActive == true] active unclickable [/#if]" [#if isActive == true]aria-current="page"[/#if] [#if navItem.link?has_content && navItem.link == "external"]target="_blank"[/#if] href="${linkLevel1}">
                          ${navItemsName}
                        </a>
                        <button type="button" class="btn dropdown-toggle dropdown-toggle-split" id="dropdownMenu-${navItem['jcr:uuid']}" data-bs-toggle="dropdown" aria-expanded="false">
                          <span class="visually-hidden">Toggle Dropdown</span>
                        </button>
                        <div class="dropdown-menu" aria-labelledby="dropdownMenu-${navItem['jcr:uuid']}">
                          [#list navItemsNested as navItemNested]
                            [#assign linkLevel2 = ""]
                            [#if navItemNested.link?has_content && navItemNested.link == "internal"]
                              [#assign linkLevel2 = getPageLinkById(navItemNested.internal!"")]
                              [#assign subnavPageContent = cmsfn.contentById(navItemNested.internal, 'website')!""]
                              [#if navItemNested.internal == currentPage['jcr:uuid']]
                                [#assign isActive = true]
                              [#else]
                                [#assign isActive = false]
                              [/#if]
                            [#else]
                              [#assign linkLevel2 = navItemNested.external]
                            [/#if]
                            [#assign subItemsNested = cmsfn.children(navItemNested, "mgnl:nav")]
                            [#assign isHideInNav2 = subnavPageContent.hideInNav!false/]
                            [#if isHideInNav2 == false]
                              [#if subItemsNested?size > 0]
                                <div class="dropdown-submenu">
                                  <a class="dropdown-item [#if isActive == true] active unclickable[/#if]" [#if isActive == true]aria-current="page"[/#if] [#if navItemNested.link?has_content && navItemNested.link == "external"]target="_blank"[/#if] href="${linkLevel2}">${navItemNested.navTitle!navItemNested.@name}</a>
                                  <div class="dropdown-menu">
                                  [#list subItemsNested as subMenu]
                                    [#assign linkLevel3 = ""]
                                    [#if subMenu.link?has_content && subMenu.link == "internal"]
                                      [#assign linkLevel3 = getPageLinkById(subMenu.internal!"")]
                                      [#assign subnav2PageContent = cmsfn.contentById(subMenu.internal, 'website')!""]
                                      
                                      [#if subMenu.internal == currentPage['jcr:uuid']]
                                        [#assign isActive = true]
                                      [#else]
                                        [#assign isActive = false]
                                      [/#if]
                                      [#assign isHideInNav3 = subnav2PageContent.hideInNav!false/]
                                      [#if isHideInNav3 == false]
                                        <a class="dropdown-item [#if isActive == true] active unclickable[/#if]" [#if isActive == true]aria-current="page"[/#if] href="${linkLevel3}">${subMenu.navTitle!subMenu.@name}</a>                                 
                                      [/#if]
                                    [#else]
                                      <a class="dropdown-item" target="_blank" href="${linkLevel3}">${subMenu.navTitle!}</a>
                                    [/#if]
                                    
                                  [/#list]
                                  </div>
                                </div>
                              [#else]
                                <a class="dropdown-item [#if isActive == true] active unclickable[/#if]" [#if isActive == true]aria-current="page"[/#if] [#if navItemNested.link?has_content && navItemNested.link == "external"]target="_blank"[/#if] href="${linkLevel2}">${navItemNested.navTitle!navItemNested.@name}</a>
                              [/#if]
                            [/#if]
                          [/#list]
                        </div>
                      </div>
                    </li>
                  [#else]
                    <li class="nav-item">
                      <a class="nav-link[#if isActive == true] active disabled[/#if]" [#if isActive == true]aria-current="page"[/#if] href="${linkLevel1}" [#if navItem.link?has_content && navItem.link == "external"]target="_blank"[/#if]>${navItemsName}</a>
                    </li>
                  [/#if]
                [/#if]
              [/#list]
            [/#if]
          [/#if]
          
        </ul>
        [@cms.area name="languageSelector" /]
      </div>
    </div>
  </nav>
  <div class="promo d-sm-none d-md-block">
    <div class="container">
      [@cms.area name="promo" /]
    </div>
  </div>
[/#if]
----
--
Template YAML::
+
--
*Navigation area*

Template ID: `btk:includes/areas/nav`
[source,yaml]
----
title: Navigation
renderType: freemarker
templateScript: /btk/templates/areas/nav.ftl
areas:
  languageSelector: !include:/btk/includes/areas/languageSelector.yaml
  promo:
    availableComponents:
      image:
        id: btk:components/image/image
      text:
        id: btk:components/text/text
      teaser:
        id: btk:components/teaser/teaser
----
--
